<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ammar's Musings - Sahl Documentation</title>
    <meta name="description" content="Ammar's Musings">
    <meta name="author" content="Malik Ammar Faisal">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="../fonts/style.css" />
    <link rel="stylesheet" href="../css/default.css" />
    <link rel="stylesheet" href="../css/syntax.css" />
</head>

<body>
    <header>
        <div class="logo">
            <a href="../">Ammar's Musings</a>
        </div>
        <nav>
            <a href="../">Home</a>
            <a href="../about.html">About</a>
            <a href="../contact.html">Contact</a>
            <a href="../archive.html">Archive</a>
        </nav>
    </header>

    <main role="main">
        <h1>Sahl Documentation</h1>
        <article>
    <section class="header">
        Posted on January  1, 2024
        
    </section>
    <section>
        <h1 id="sahl-documentation">Sahl Documentation</h1>
<p>Welcome to the documentation for the Sahl programming language. Below, you’ll find detailed information about the language features and syntax.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<table>
<tr>
<td width="33%" valign="top">
<table>
<tr>
<td>
<b><a>Basics</a></b>
</td>
</tr>
</table>
<ul>
<li>
<a href="#hello-world">Hello World</a>
</li>
<li>
<a href="#functions">Functions</a>
</li>
<li>
<a href="#variables">Variables</a>
</li>
<li>
<a href="#types">Types</a>
</li>
<li>
<a href="#operators">Operators</a>
</li>
</ul>
</td>
<td width="33%" valign="top">
<table>
<tr>
<td>
<b><a href="#statements">Statements</a></b>
</td>
</tr>
</table>
<ul>
<li>
<a href="#if">if</a>
</li>
<li>
<a href="#while">while</a>
</li>
<li>
<a href="#for">for</a>
</li>
<li>
<a href="#match">match</a>
</li>
<li>
<a href="#destructuring">destructuring</a>
</li>
</ul>
</ul>
</td>
<td width="33%" valign="top">
<table>
<tr>
<td>
<b><a href="#expressions">Expressions</a></b>
</td>
</tr>
</table>
<ul>
<li>
<a href="#function-calls">Function Calls</a>
</li>
<li>
<a href="#array-access">Array Access</a>
</li>
<li>
<a href="#make">Make</a>
</li>
<li>
<a href="#chan-recvsend">Chan Recv/Send</a>
</li>
</ul>
</td>
<td width="33%" valign="top">
<table>
<tr>
<td>
<b><a>More</a></b>
</td>
</tr>
</table>
<ul>
<li>
<a href="#channels">Channels</a>
</li>
<li>
<a href="#threads">Threads</a>
</li>
<li>
<a href="#extern">Extern</a>
</li>
<li>
<a href="#examples">Examples</a>
</li>
</ul>
</td>
</tr>
</table>
<h2 id="hello-world">Hello World</h2>
<p>Let’s start with the traditional “Hello World” program:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    print(<span class="st">&quot;Hello World! </span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>This basic program defines a <code>main</code> function and prints the classic greeting.</p>
<h2 id="functions">Functions</h2>
<p>Functions are fundamental in Sahl. Here’s an example of a function adding two integers:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fun add(a<span class="op">:</span> int<span class="op">,</span> b<span class="op">:</span> int) <span class="op">-&gt;</span> int <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>If the return type is unspecified, it defaults to <code>void</code>.</p>
<h2 id="variables">Variables</h2>
<p>Variables store and manipulate data. Check this example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> c <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    print(c<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Variable types are inferred from assigned values.
<br /></p>
<p>Constants are declared with the <code>const</code> keyword outside of functions:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> PI <span class="op">=</span> <span class="dv">3.14</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> AREA <span class="op">=</span> PI <span class="op">*</span> <span class="dv">10</span> <span class="op">*</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    print(<span class="st">&quot;Area of circle of radius 10 is &quot;</span><span class="op">,</span> AREA<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="types">Types</h2>
<p>Sahl supports various types, including basic ones like <code>int</code>, <code>double</code>, <code>bool</code>, <code>string</code>, and <code>char</code>. It also includes more complex types like arrays, tuples, maps, and channels.</p>
<h3 id="arrays">Arrays</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span></code></pre></div>
<h3 id="tuple">Tuple</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> myTuple <span class="op">=</span> (<span class="dv">10</span><span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">,</span>)<span class="op">;</span> <span class="co">// trailing comma is nessesary</span></span></code></pre></div>
<h3 id="map">Map</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> myMap <span class="op">=</span> map<span class="op">&lt;</span>int<span class="op">,</span> string<span class="op">&gt;;</span></span></code></pre></div>
<h3 id="chan">Chan</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> myChannel <span class="op">=</span> chan<span class="op">&lt;</span>int<span class="op">&gt;;</span></span></code></pre></div>
<h3 id="type-constructors">Type Constructors</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Person <span class="op">=</span> PersonS(string) <span class="op">|</span> PersonI(int)<span class="op">;</span></span></code></pre></div>
<h2 id="statements">Statements</h2>
<p>Essential statements include <code>if</code>, <code>while</code>, <code>for</code>, <code>break</code>, <code>continue</code>, and <code>return</code>. Let’s explore a few:</p>
<h3 id="if"><code>if</code></h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> a <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> a <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="while"><code>while</code></h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> a <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> a <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="for"><code>for</code></h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">10</span> <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    print(i<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="match"><code>match</code></h3>
<p>Works for types with constructors and also as a switch statement.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Person <span class="op">=</span> PersonS(string) <span class="op">|</span> PersonI(int)<span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 <span class="op">=</span> PersonS(<span class="st">&quot;John&quot;</span>)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="op">=</span> PersonI(<span class="dv">20</span>)<span class="op">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> arr_p <span class="op">=</span> [p1<span class="op">,</span> p2]<span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> p <span class="kw">in</span> arr_p <span class="op">{</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">match</span> p <span class="op">{</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>            PersonS(name) <span class="op">-&gt;</span> <span class="op">{</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                print(name<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>            PersonI(age) <span class="op">-&gt;</span> <span class="op">{</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>                print(age<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">match</span> a <span class="op">{</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        <span class="dv">10</span> <span class="op">-&gt;</span> <span class="op">{</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>            print(<span class="st">&quot;a is 10</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="op">-&gt;</span> <span class="op">{</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>            print(<span class="st">&quot;compiler is broken!</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="destructuring">destructuring</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> tuple <span class="op">=</span> (<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span>)<span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> (a<span class="op">,</span> b<span class="op">,</span>) <span class="op">=</span> tuple<span class="op">;</span></span></code></pre></div>
<h3 id="break-and-continue"><code>break</code> and <code>continue</code></h3>
<p>Used inside loops for exiting or continuing to the next iteration.</p>
<h3 id="return"><code>return</code></h3>
<p>Used inside functions to return a value.</p>
<h2 id="expressions">Expressions</h2>
<p>Expressions involve operators, function calls, array access, and more.</p>
<h3 id="operators">Operators</h3>
<p>Math operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>. Comparison operators: <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>. Logical and bitwise operators are also supported.
The precedence of operators is listed below, from highest to lowest:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>()</code></td>
<td>Parentheses</td>
</tr>
<tr class="even">
<td><code>[]</code></td>
<td>Array access</td>
</tr>
<tr class="odd">
<td><code>!</code>, <code>~</code>, <code>-</code></td>
<td>Logical NOT, bitwise NOT, unary minus</td>
</tr>
<tr class="even">
<td><code>*</code>, <code>/</code>, <code>%</code></td>
<td>Multiplication, division, remainder</td>
</tr>
<tr class="odd">
<td><code>+</code>, <code>-</code></td>
<td>Addition, subtraction</td>
</tr>
<tr class="even">
<td><code>&lt;&lt;</code>, <code>&gt;&gt;</code></td>
<td>Bitwise shift left, bitwise shift right</td>
</tr>
<tr class="odd">
<td><code>&amp;</code></td>
<td>Bitwise AND</td>
</tr>
<tr class="even">
<td><code>^</code></td>
<td>Bitwise XOR</td>
</tr>
<tr class="odd">
<td><code>\|</code></td>
<td>Bitwise OR</td>
</tr>
<tr class="even">
<td><code>&amp;&amp;</code></td>
<td>Logical AND</td>
</tr>
<tr class="odd">
<td><code>\|\|</code></td>
<td>Logical OR</td>
</tr>
<tr class="even">
<td><code>==</code>, <code>!=</code></td>
<td>Equality, inequality</td>
</tr>
<tr class="odd">
<td><code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></td>
<td>Comparison</td>
</tr>
<tr class="even">
<td><code>=</code></td>
<td>Assignment</td>
</tr>
</tbody>
</table>
<h3 id="function-calls">Function Calls</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> result <span class="op">=</span> add(<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="array-access">Array Access</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> value <span class="op">=</span> a[<span class="dv">0</span>]<span class="op">;</span></span></code></pre></div>
<h3 id="make">Make</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> newArray <span class="op">=</span> make([int]<span class="op">,</span> <span class="dv">10</span>)<span class="op">;</span></span></code></pre></div>
<p><code>make</code> is used for creating arrays, maps, and channels.</p>
<h3 id="chan-recvsend">Chan Recv/Send</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> c <span class="op">=</span> make(chan<span class="op">&lt;</span>int<span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>c <span class="op">&lt;-</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> value <span class="op">=</span> <span class="op">&lt;-</span>c<span class="op">;</span></span></code></pre></div>
<p>Check <a href="#channels">Channels</a>.</p>
<h2 id="channels">Channels</h2>
<p>Channels facilitate communication between coroutines. Example:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fun sendVals(c<span class="op">:</span> chan<span class="op">&lt;</span>int<span class="op">&gt;,</span> count<span class="op">:</span> int<span class="op">,</span> id<span class="op">:</span> int) <span class="op">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> count <span class="op">{</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        c <span class="op">&lt;-</span> i<span class="op">;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>fun recvVals(c<span class="op">:</span> chan<span class="op">&lt;</span>int<span class="op">&gt;,</span> count<span class="op">:</span> int<span class="op">,</span> id<span class="op">:</span> int) <span class="op">{</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> count <span class="op">{</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        print(<span class="op">&lt;-</span>c<span class="op">,</span> <span class="st">&quot; - &quot;</span><span class="op">,</span> id<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="dv">100</span> <span class="op">{</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> a <span class="op">=</span> make(chan<span class="op">&lt;</span>int<span class="op">&gt;,</span> <span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>        sahl sendVals(a<span class="op">,</span> <span class="dv">10000</span><span class="op">,</span> i)<span class="op">;</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>        sahl recvVals(a<span class="op">,</span> <span class="dv">10000</span><span class="op">,</span> i)<span class="op">;</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="threads">Threads</h2>
<p>Sahl supports threads. In the virtual machine, threads are implemented as coroutines.
The <code>sahl</code> keyword is used for running a function in a new coroutine.
<br />
In the virtual machine, the main thread does not exit until all other threads have exited.
But when compiled to executable, the main thread exits immediately after spawning other threads and something like semaphores is needed to prevent the main thread from exiting.
<br /></p>
<p>Example:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fun printn(n<span class="op">:</span> int) <span class="op">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">10</span> <span class="op">{</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        print(n<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">100</span> <span class="op">{</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        sahl printn(i)<span class="op">;</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="extern">Extern</h2>
<p>The <code>extern</code> keyword is used for importing external c functions. Example:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode rs"><code class="sourceCode rust"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// prog.sahl</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> fun exp(a<span class="op">:</span> double) <span class="op">-&gt;</span> double <span class="op">{}</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>fun main() <span class="op">{</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> a <span class="op">=</span> <span class="dv">10.0</span><span class="op">;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> b <span class="op">=</span> exp(a)<span class="op">;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    print(b<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span> <span class="co">// 22026.465795</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>compile with:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./frontend/target/release/sahl</span> file.sahl <span class="at">-n</span> <span class="dv">2</span><span class="op">&gt;</span>exe.ll</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">clang</span> <span class="at">-lm</span> <span class="at">-O3</span> rt.c exe.ll math.c <span class="at">-o</span> exe</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./exe</span></span></code></pre></div>
<p>The <code>sahl</code> keyword runs a function in a new coroutine.</p>
<h2 id="examples">Examples</h2>
<p>Explore more examples in the <a href="samples/">samples</a> folder. Happy coding in Sahl!</p>
    </section>
</article>

    </main>

    <footer>
        Site proudly generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>
    </footer>
</body>

</html>